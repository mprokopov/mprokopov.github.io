---
title: Бекапы Windows TimeMachine-style на DNS-323 (DNS-320)
author: Max Prokopov
type: post
date: 2011-11-11T09:00:24+00:00
draft: true
url: /?p=790
categories:
  - dns-320
  - железо
  - Софт
tags:
  - d-link nas
  - hardware
  - timemachine
  - windows backups

---
В Mac OS существует (и работает) потрясающий функционал, который называется TimeMachine, суть работы которого сводится к следующему. Mac OS делает полную копию файловой системы в удаленном (или локальном) хранилище, и при следующем бекапе использует предыдущий путем создания символических ссылок на файлы, которые не изменялись, и которые находятся в предыдущей копии. Новые или измененные файлы будут скопированы заново. Последующая копия будет также использовать файлы предыдущей и предпредыдущей. Таким образом мы можем сколь угодно часто делать резервное копирование и практически не терять место в хранилище! К тому же мы легко можем использовать файловую систему по состоянию на любое из имеющихся бекапов.

Отличный функционал! Так вот, дорогие мои, есть хорошая новость – windows мы тоже можем принудить бекапиться в том же духе.

В этом деле нам помогут накопитель [D-Link DNS-320][1], [rsnapshot][2] и [DeltaCopy под Windows][3] (которому прийдется пропатчить cygwin1.dll).

Устанавливаем и настраиваем DNS-323 [согласно мануалу, выпиливаем на нем fun_plug][4].

[Устанавливаем rsnapshot][5].

Все, далее переходим к настройке rsync сервера на windows. Качаем и устанавливаем DeltaCopy, после чего сразу же [качаем cygwin1.dll и заменяем][6] в установленном экземпляре. Запускаем DeltaCopy и устанавливаем его как сервис, не забываем сделать доступным по rsync протоколу те каталоги, которые хотим бекапить.

 [1]: http://www.dlink.com.au/products/?pid=852
 [2]: http://rsnapshot.org/
 [3]: http://www.aboutmyip.com/AboutMyXApp/DeltaCopy.jsp
 [4]: http://brj.pp.ru/wiki/hardware/storage-dns-323
 [5]: http://www.nslu2-linux.org/wiki/Optware/Dns323
 [6]: http://dl.dropbox.com/u/152369/cygwin1-dll-20-11-18.tar.bz2