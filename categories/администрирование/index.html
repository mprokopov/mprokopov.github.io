<!DOCTYPE html>
<html>
    <head><title>Maksym Prokopov personal website</title>
<meta charset="utf-8"/>
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta content="width=device-width, initial-scale=1.0, user-scalable=no" name="viewport">


<link rel="stylesheet" href="https://mprokopov.github.io/style.min.b47e9dbbe9cb8ba63ca483edbb6a0ccf62fe04626db6ba8901ff95c740f26675.css">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
</head>
    <body><div id="header">
    <a class="title" href="/"><div id="title">Блог Максима Прокопова</div><div id="description">Считаю что идеи это такая штука, которой следует делиться</div></a>
</div>
<div id="nav-container">
    <div id="nav">
        <div class="menu">
            <div class="nav">
                <ul>
                    
                    <li class="page-item"><a href="https://mprokopov.github.io/pages/trips/">Путешествую</a></li>
                    
                    <li class="page-item"><a href="https://mprokopov.github.io/pages/loosingweight/">Худею</a></li>
                    
                    <li class="page-item"><a href="https://mprokopov.github.io/pages/reading/">Читаю</a></li>
                    
                    <li class="page-item"><a href="https://mprokopov.github.io/pages/creating/">Создаю</a></li>
                    
                    <li class="page-item"><a href="https://mprokopov.github.io/pages/about/">Обо мне</a></li>
                    
                </ul>
            </div>
        </div>
    </div>
</div>
<div class="clear"></div>
        <div id="container">

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2016/07/itil-for-business/">Видео и слайды мастер-класса про ИТ для бизнеса</a>
    </h1>
    <div class="date">08.07.2016</div>
    <div><ul>
<li>как правильно излагать мысли от сисадмина директору и наоборот?</li>
<li>какие ИТ вопросы правильно задавать и кому?</li>
<li>где можно и нужно экономить на ИТ, а где не стоит</li>
<li>безопасность</li>
<li>мониторинг</li>
</ul>
<p>Чистый концентрат моего опыта управлением ИТ с точки зрения бизнеса и аутсорсинга ИТ-процессов.</p>
<p>Об этом и другом я рассказал на небольшом мастер-классе. Спасибо «Клубу деловых людей» за предоставленную возможность и Саше Пузько за помощь в съемке.</p>
<p>Слайды</p>
<p>[slideshare id=63841245&amp;doc=2016-03-22-160708104224]</p>
<p>Видео</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/g0zdXOud0QQ" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2014/04/chef-recipe-for-nginx-passenger-install-ubuntu-debian-from-repository/">Chef recipe for nginx passenger install (ubuntu, debian) from repository</a>
    </h1>
    <div class="date">03.04.2014</div>
    <div><p>Here is my part of chef recipe for installing nginx + passenger 4.x module. This recipe depends on ‘nginx’, ‘apt’ recipes.</p>
<p>package ‘apt-transport-https’.</p>
<p>package ‘ca-certificates’</p>
<p>apt_repository «nginx-passenger» do</p>
<p>uri «https://oss-binaries.phusionpassenger.com/apt/passenger»</p>
<p>distribution node[‘lsb’][‘codename’]</p>
<p>components [«main»]</p>
<p>keyserver «keyserver.ubuntu.com»</p>
<p>key «561F9B9CAC40B2F7»</p>
<p>end</p>
<p><span style="line-height: 1.5em;">include_recipe ‘apt’ ## this will do </span>apt-get update</p>
<p><span style="line-height: 1.5em;">package ‘nginx-extras’</span></p>
<p>package ‘passenger’</p>
<p>This will add repository, sign key and install passenger from phusion apt repository.</p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2012/09/%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B0-%D0%B4%D0%BD%D1%8F-%D0%B4%D0%BB%D1%8F-%D1%83%D0%B2%D0%BB%D0%B5%D0%BA%D0%B0%D1%8E%D1%89%D0%B8%D1%85%D1%81%D1%8F-itil-free-itil-training/">Ссылка дня для увлекающихся ITIL: Free ITIL Training</a>
    </h1>
    <div class="date">17.09.2012</div>
    <div><p>Не смотря на то, что все курсы на английском, достаточно много материала, включая ментальные карты <a href="http://www.freeitiltraining.com">здесь</a> </p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2012/08/%D0%B2%D0%BF%D0%B5%D1%87%D0%B0%D1%82%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F-%D0%BE%D1%82-%D0%BF%D0%BE%D1%81%D0%B5%D1%89%D0%B5%D0%BD%D0%B8%D1%8F-%D1%81%D0%B5%D0%BC%D0%B8%D0%BD%D0%B0%D1%80%D0%B0-%D0%BF%D0%BE-iti/">Впечатления от посещения семинара по ITIL от Мук и HP</a>
    </h1>
    <div class="date">09.08.2012</div>
    <div><p>Cходил сегодня на <a href="http://habrahabr.ru/company/muk/blog/148804/">ITIL семинар</a>, очень понравилось!</p>
<div>
</div>
<div>
  Тренинг проводили в режиме симуляции HP Race to Results Simulation <a href="http://h10076.www1.hp.com/education/simulation.htm">http://h10076.www1.hp.com/education/simulation.htm</a>
</div>
<div>
</div>
<div>
  Суть в следующем:
</div>
<div>
</div>
<div>
  Игроки разбивались на команды:
</div>
<div>
  1. Formula drivers (customers).
</div>
<div>
  2. Service Desk,
</div>
<div>
  3. Technical Stuff,
</div>
<div>
  4. IT Director,
</div>
<div>
  5. SEO (Financial)
</div>
<div>
  Сервисы представляли собой компоненты Формулы 1: Fuel supply, Air cooling, Brakes, Engine и так далее.
</div>
<div>
  Проводилась симуляция гонки, на протяжении которой возникали инциденты в данных системах, наличие инцидента уменьшало среднюю скорость в гонке.
</div>
<div>
  Инцидент передавался в сервис деск, который раскодировал информацию о машине, гонке и затронутой системе в код приложения и передавал в Tech stuff, которые по спец картам пытались найти решение инцидента (по спец книжечке задачки на логику, на IQ). Можно было купить workaround, который дейстововал две минуты гонки, либо за дорого (в несколько раз), решение проблемы у вендора(ведущего), решение ребуса. Это решение ребуса можно было применять при новых инцидентах (если их правильно категоризировать).
</div>
<div>
</div>
<div>
  Также был момент по внедрению новых сервисов, когда нужно было измененные и новые сервисы, расчитанные на определенные суммы (бюджет был ограничен),  проработать со всеми командами, что бы знали как их категоризировать и обрабатывать.
</div>
<div>
</div>
<div>
  Первую симуляцию запустили и начался хаос и броуновское движение, попытались на месте придумывать формы для записи инцидентов и процессы по категоризации, но получалось довольно плохо и гонку мы проиграли. После анализа ошибок и кофе-брейка распределились по специализациям, разработали новые формы для инцидентов, улучшили, как могли, процессы, и по итогам новой симуляции выиграли гонку.
</div>
<div>
</div>
<div>
  Так за короткое время мы успели познать суть сервисного подхода, и управления.
</div>
<div>
  За что огромное спасибо компании Мук и HP за предоставленную возможность.
</div>
<div>
</div>
<div>
  вот небольшое видео работы tech stuff с картой CMDB
</div>
<div>
</div>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/HUumH9UlsWk" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2012/02/%D0%BC%D0%BE%D0%B9-%D0%B4%D0%BE%D0%BA%D0%BB%D0%B0%D0%B4-%D0%BD%D0%B0-%D0%BF%D1%80%D0%BE%D1%88%D0%BB%D0%BE%D0%B9-%D1%85%D0%B0%D0%B1%D1%80%D0%B0%D0%B2%D1%81%D1%82%D1%80%D0%B5%D1%87%D0%B5/">Мой доклад на прошлой хабравстрече</a>
    </h1>
    <div class="date">11.02.2012</div>
    <div><p>На <a href="http://habrahabr.ru/blogs/personal/137848/">прошлой хабраконференции</a> записали также и мой доклад об «ИТ аутсорсинге с поправкой на отечественного потребителя», однако видео, в виду слишком темного помещения и отсутствия дополнительного света вырезали, осталось только аудио.<br>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/TpF49HWllI8" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>
</p>
<p>Следующий мой доклад будет <a href="http://asterisk.in.ua">о цифровой телефонии на базе asterisk</a>, на этот раз с видео.</p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2012/01/%D1%81%D0%B0%D0%BC%D1%8B%D0%B9-%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9-%D1%80%D0%B5%D0%B4%D0%B8%D1%80%D0%B5%D0%BA%D1%82-301/">Самый правильный редирект 301</a>
    </h1>
    <div class="date">19.01.2012</div>
    <div><p>Если вы мигрируете сайт на новый домен, и не хотите потерять SEO позиций, то важно сделать идеологически правильный редирект.</p>
<p>Делается он так:</p>
<p>Options +FollowSymLinks <br>
RewriteEngine on <br>
RewriteCond %{HTTP_HOST} !^newdomain.com <br>
RewriteRule ^(.*)$ <a href="http://www.newdomain.com/$1">http://www.newdomain.com/$1</a> [R=301,L]</p>
<p>Это можно прописать прямо в vhost секции для сайта, и даже не создавать домашние каталоги.</p>
<p>Что оставит работающими и старые ссылки на материалы, и переучит поисковики на новые URL.</p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2011/12/%D1%83%D1%87%D0%B5%D1%82-%D1%82%D0%B5%D1%85%D0%BD%D0%B8%D0%BA%D0%B8-%D0%BD%D0%B0-%D0%BF%D1%80%D0%B5%D0%B4%D0%BF%D1%80%D0%B8%D1%8F%D1%82%D0%B8%D0%B8/">Учет техники на предприятии</a>
    </h1>
    <div class="date">07.12.2011</div>
    <div><p>Вот, не смотря на интерфейс, разработанный, очевидно, программистом без участия дизайнера, сам по себе комплекс вполне заслуживает быть рассмотренным в качестве системы учета техники на предприятии.</p>
<p> </p>
<p>Очевидные плюсы кандидата: понятность и простота использовавания, бесплатность и русифицированность.</p>
<p>По большому счету программа делает действия аналогичные Everest Audit (сейчас AiDA), но при этом не просит денег.</p>
<p><a href="http://checkcfg.narod.ru/">http://checkcfg.narod.ru/</a></p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" title="softsh.gif" src="/uploads/2011/12/softsh.gif" border="0" alt="Softsh" width="550" height="304" /></p>
<p>К слову, open source аналог данного комплекса, на который стоит посмотреть <a href="http://www.ocsinventory-ng.org/en/about/features/ocsng-glpi.html">http://www.ocsinventory-ng.org/en/about/features/ocsng-glpi.html</a></p>
<p>Но с веб-интерфейсом там та же беда, что и у большинства open source продуктов, – дизайн выполенный программистом, как говорит г-н Умпутун, нарисованный чужими для хищников.</p>
<p>UPDATE: а вот простой и функциональный аналог AIDA с открытым кодом <a href="http://www.aspia.ru/">Aspia</a>.</p>
<p> </p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2011/08/%D1%85%D0%BE%D0%B7%D1%8F%D0%B9%D0%BA%D0%B5-mac-os-%D0%BD%D0%B0-%D0%B7%D0%B0%D0%BC%D0%B5%D1%82%D0%BA%D1%83-%D0%BE%D1%87%D0%B8%D1%81%D1%82%D0%BA%D0%B0-dns-%D0%BA%D0%B5%D1%88%D0%B0/">Хозяйке Mac OS на заметку: очистка DNS кеша</a>
    </h1>
    <div class="date">18.08.2011</div>
    <div><p>dscacheutil -flushcache</p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2011/06/mac-layout-switch-caps-lock/">Переключение раскладки клавиатуры в Mac при помощи Caps Lock (aka Мефодица by Lebedev)</a>
    </h1>
    <div class="date">21.06.2011</div>
    <div><p>В молодости ваш покорный имел радость готовить FreeBSD и Linux, в котором переключение раскладки по Caps Lock было функцией нативной. Для windows тоже был <a href="http://technet.microsoft.com/en-us/sysinternals/bb897578.aspx">хак от Марка Руссиновича</a>.</p>
<p>Необходимость в данной манипуляции возникла по мере изучения редактора для трушных юниксоидов — Emacs, комбинации клавиш которого были все завязаны на клавишу Control, расположена которая была не в очень удобном месте. Как выяснилось, на то были <a href="http://en.wikipedia.org/wiki/Space-cadet_keyboard">свои исторические причины</a>. И подавляющее большинство пользователей Emacs тут же меняли местами control и caps lock.</p>
<p>Долго я раздумавал, с какой стороны подойти к этой задаче в mac os, пока не наткнулся на <a href="http://tema.livejournal.com/913007.html?thread=505212783">заметку в стиле вопрос-ответ в уютной у Артемия</a>. В его ответе прилагается ссылка на архив с Мефодица.bundle</p>
<p><a href="http://www.tema.ru/jjj/mefoditsa.zip">http://www.tema.ru/jjj/mefoditsa.zip</a></p>
<p>файл необходимо после распаковки положить в /Library/Keyboard Layouts/ и в настройках языка выбрать «Мефодица». Выйти из учетной записи и снова войти.</p>
<p>Теперь можно переключать раскладки клавиатуры по caps lock, при чем индикатор будет сигнализировать о выбранном языке. Горит led — русский, не горит — английский.</p>
<p>Из замеченных особенностей — перемаплены цифровые клавиши на верхний регистр, например для точки и запятой необходимо нажать просто 6 или 7, если необходимо набрать цифры — делайте при помощи shift. Не менее интересно будет ознакомиться в Ководстве у Артемия и с историей проблемы русских <a href="http://www.artlebedev.ru/kovodstvo/sections/105/">знаков препинания при наборе</a>.</p>
<p>Бандл использует свой механизм переключения, так что command + space можно отключить от переключения раскладок насовсем и использовать с удобством, например, в quicksilver.</p>
<p>UPDATE: Я привык и втянулся! Знаки препинания в нижнем регистре для русского языка это очень-очень правильно. <a href="http://code.google.com/p/iterm2/issues/detail?id=1067&amp;start=200">Обнаружен огорчающй баг с iTerm2</a>, но это, думаю, претензии к iTerm2.</p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" title="language_switch_caps.png" src="/uploads/2011/06/language_switch_caps.png" border="0" alt="Language switch caps" width="600" height="529" /></p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2011/06/zabbix-freebsd-program-counter-not-available-for-this-architecture/">Zabbix freebsd program counter not available for this architecture</a>
    </h1>
    <div class="date">20.06.2011</div>
    <div><p>После обновления Zabbix на FreeBSD до 1.8.5 стал получать сообщения вроде этого:</p>
<p>Zabbix freebsd program counter not available for this architecture</p>
<p>и заббикс перестал стартовать.</p>
<p> </p>
<p>Все дело оказалось в старой библиотеке net-snmp, которую необходимо обновить до 5.5, и уже затем пересобрать zabbix.</p>
<p> </p>
<p> </p>
<pre escaped="true" lang="shell" line="1">portupgrade net-snmp
cd /usr/ports/net-mgmt/zabbix-server
make deinstall
make reinstall</pre>
<p> </p>
<p> </p>
<p>Как говорят наши пиндосские товарищи, works like a charm</p>
<p> </p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2011/06/mac-os-x-leopard-%D0%B8-%D0%B1%D0%B0%D0%B3-%D1%81-pppoe-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-tagged-vlan-802-1q/">MAC OS X Leopard и баг с PPPoE через tagged VLAN 802.1Q</a>
    </h1>
    <div class="date">20.06.2011</div>
    <div><p>Достаточно, как казалось бы, обыкновенный сетап, подключение модемов через свитч с поддержкой 802.1Q, tagged VLAN создаваемый Mac OS X. Однако, PPPoE сессия через VLAN интерфейсы не поднимается (что вполне работает в Windows и Linux).</p>
<p>Но обо всем по порядку.</p>
<p>Есть модем от datagroup без PPPeE, статический IP, настроенный через tagged VLAN. И все работает, только вот медленно и канал довольно нестабильный.</p>
<p>Клиент подключается через Укртелеком, покупая ADSL модем. Подключение через PPPoE. Создаем новый tagged VLAN, настраиваем свитч, подключаем модем, настраиваем его в режим бриджа. И вот здесь начинается самое интересное.</p>
<p>PPPoE коннект попросту не проходит.</p>
<p>Сдуваем пыль с tcpdump и прослушиваем броадкасты:</p>
<p>tcpdump -n -e -i vlan2 ether host ff:ff:ff:ff:ff:ff</p>
<p>их нет!</p>
<p>tcpdump -n -e  ether host ff:ff:ff:ff:ff:ff</p>
<p>а теперь есть, но идут они через другой интерфейc.</p>
<p>Для того что бы выбрать интерфейс, с которого будут исходить PPPoE PADI пакеты необходимо создать PPPoE правым кликом на интерфейсе,</p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" title="pppoe.png" src="/uploads/2011/06/pppoe.png" border="0" alt="pppoe" width="525" height="478" /></p>
<p>Однако в нашем случае фокус в том, что при выборе интерфейсов vlan и клик на «создать службу PPPoE» ни к чему не приводят. При этом с физическими интерфейсами работает исключительно гладко.</p>
<p>Даже запуск вручную не приводит к позитивным результатам</p>
<p>pppd plugin PPPoE.ppp device vlan0 noauth defaultroute user username password pw</p>
<p>Описание бага на английском. Решения нет.</p>
<p><a href="https://discussions.apple.com/thread/1706103?start=0&amp;tstart=0">https://discussions.apple.com/thread/1706103?start=0&amp;tstart=0</a></p>
<p>Теоретические выкладки про PPPoE</p>
<p><a href="http://subnets.ru/blog/?p=308">http://subnets.ru/blog/?p=308</a></p>
<p>P.S. пришлось настраивать модем в режим роутера и делать к серверу DMZ, что считаю решением не самым лучшим.</p>
<p>P.P.S. как workaround возможна настройка без VLAN на полностью физическом интерфейсе, а локальную сеть завернуть в tagged vlan. Однако данное решение сопряжено с другого рода сложностями.</p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2011/05/%D1%81%D0%B1%D1%80%D0%BE%D1%81%D0%B8%D1%82%D1%8C-%D0%B7%D0%B0%D0%B1%D1%8B%D1%82%D1%8B%D0%B9-%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D1%8C-%D0%B4%D0%BB%D1%8F-sa-%D0%BD%D0%B0-mssql-2000/">Сбросить забытый пароль для sa на MSSQL 2000</a>
    </h1>
    <div class="date">05.05.2011</div>
    <div><p>Бывают в жизни ситуации, когда пароль от sa для MS SQL забыт, либо установлен неизвестным одмином, а доступ все же есть, но через доменный аккаунт.</p>
<p>Не отчаивайтесь, сбросить пароль можно довольно простым действием, зайти в Query Analyzer и запустить</p>
<p> </p>
<p>sp_password @new = ‘will_never_forget_again’, @loginame = ‘sa’</p>
<p> </p>
<p>и будет вам великое счастье.</p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2011/05/ip-over-dns/">IP over DNS</a>
    </h1>
    <div class="date">04.05.2011</div>
    <div><p>Вот что обнаружено в прошивке dd-wrt на маршрутизаторе TP-Link TL-WR1043ND (IP over DNS Tunneling)</p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" title="ipoverdns.png" src="/uploads/2011/05/ipoverdns.png" border="0" alt="ip over dns tunneling" width="600" height="268" /></p>
<p>А это значит, что легким движением мыши вы можете включить аццкий функционал, позволяющий обходить авторизацию многих платных хотспотов в отелях, и использовать wifi бесплатно, как описано здесь <a href="http://xgu.ru/wiki/DNS-tunneling">http://xgu.ru/wiki/DNS-tunneling</a> и здесь <a href="http://theapplegeek.ru/archives/283">http://theapplegeek.ru/archives/283</a></p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2011/04/linux-%D0%BC%D0%B8%D0%B3%D1%80%D0%B0%D1%86%D0%B8%D1%8F-%D1%81-%D0%BE%D0%B4%D0%BD%D0%BE%D0%B3%D0%BE-hdd-%D0%BD%D0%B0-%D0%B2%D1%82%D0%BE%D1%80%D0%BE%D0%B9-ext3-%D1%81-%D1%83%D0%B2%D0%B5%D0%BB%D0%B8/">Linux: миграция с одного hdd на второй ext3 с увеличением объема</a>
    </h1>
    <div class="date">20.04.2011</div>
    <div><p>Пришлось на asus wl500gP мигрировать с SSD на 64Gb на USB-HDD 500Gb.</p>
<p>Как водится в интернетах была использована команда</p>
<p>dd if=/dev/sdb of=/dev/sdc</p>
<p>которая и сдублировала посекторно весь диск.</p>
<p>Фокус в том, что и сам диск 500ка стал виден как 64Гб 🙂 Гугление вокруг да около не возымело должного эффекта и решение простыми средствами (fdisk, parted) и resize2ext мне показалось стремным.</p>
<p>И вот был обнаружен <a href="http://gparted.sourceforge.net/download.php">gparted</a>, который по факту оказался ничем иным как свободной версией известного PQMagic, по крайней мере по функционалу точно такой же.</p>
<p>Легким движением мышки и диск из 64 превратился обратно в 500 и нужная партиция была раздвинута на нужный полный размер.</p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" title="gparted_1_small.png" src="/uploads/2011/04/gparted_1_small.png" border="0" alt="Gparted 1 small" width="400" height="274" /></p>
<p>Кстати, gparted являет собой загрузочный ISO, который вполне хорошо отработал в VMWare Fusion под Mac.</p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2011/04/mac-os-x-transparent-squid-ipfw-bugfix/">Mac OS X transparent squid ipfw bugfix</a>
    </h1>
    <div class="date">11.04.2011</div>
    <div><p>Сам прозрачный прокси включается проще простого, в squid.conf добавляем:</p>
<p>http_port 3128 transparent</p>
<p>и в ipfw добавляем следующее правило заворачивающее с 80го порта на внутренний:</p>
<p>ipfw add 1050 fwd 127.0.0.1:3128 tcp from 192.168.1.0/24 to not 192.168.1.0/24 80</p>
<p> </p>
<p>Однако, оказалось, на 10.6 не работает ipfw fwd правило для прозрачного прокси.</p>
<p> </p>
<p>Непродолжительное гугление помогло выявить вот такой багфикс:</p>
<p>sudo sysctl -w net.inet.ip.scopedroute = 0</p>
<p>или еще лучше прописать в /etc/sysctl.conf</p>
<p>net.inet.ip.scopedroute = 0 и перезагрузить сервер.</p>
<p> </p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2011/01/commandlinefu-%D0%B4%D0%BE%D0%BC%D0%B0%D1%88%D0%BD%D1%8F%D1%8F-%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86%D0%B0-%D1%8E%D0%BD%D0%B8%D0%BA%D1%81%D0%BE%D0%B8%D0%B4%D0%B0/">Commandlinefu : домашняя страница юниксоида</a>
    </h1>
    <div class="date">16.01.2011</div>
    <div><p>Порой бывает комментарий ценнее самой статьи, так, например, на <a href="http://habrahabr.ru/blogs/ubuntu/111717/">просторах Хабра</a> был найден линк на прекрасный сайт:</p>
<p><a href="http://www.commandlinefu.com/commands/browse">http://www.commandlinefu.com/commands/browse</a></p>
<p>Из прекрасного: если вы забыли набрать sudo перед выполнением команды, не беда, выполните sudo !!</p>
<p>и вместо !! подставится предыдущая строка.</p>
<p>Или вот, например, закрыли вам весь доступ фаерволами, из сервисов один DNS остался, так вот, можете вполне воспользоваться википедией</p>
<p>dig +short txt <keyword>.wp.dg.cx</p>
<p>где <keyword> — ключевое слово, на которое вы ищете статью.</p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2011/01/iterm2-for-mac/">iTerm2 для Mac</a>
    </h1>
    <div class="date">05.01.2011</div>
    <div><p>По наводке г-на Бобука из твиттера была выужена ссылка на iTerm2 в alpha (хотя по-моему можно уже даже из беты переводить в релиз кандидат).</p>
<p><a href="/uploads/2011/01/iTerm2-128.tiff.jpeg"><img class="alignleft size-full wp-image-540" title="iTerm2-128.tiff" src="/uploads/2011/01/iTerm2-128.tiff.jpeg" alt="" width="128" height="128" srcset="/uploads/2011/01/iTerm2-128.tiff.jpeg 128w, /uploads/2011/01/iTerm2-128.tiff-90x90.jpg 90w" sizes="(max-width: 128px) 100vw, 128px" /></a>Вкратце, <a href="http://sites.google.com/site/iterm2home/">iTerm2</a> является наследником <a href="http://iterm.sourceforge.net/">iTerm</a>, который, по-видимому, перестал бурно развиваться. В общем, iTerm2 подхватил выпавшее из рук iTerm знамя лучшего софта для доступа к терминалам.</p>
<p>Из фич iTerm2 особо хочется отметить:</p>
<ul>
<li>очень удобная навигация по закладкам (у меня более 19 хостов) с поддержкой тегов. Это очень удобно, когда можно протегировать девайсы определенной организации, по типу (cisco, freebsd, linux)</li>
<li>split screen режим</li>
<li>потрясающая скорость работы</li>
<li>автокомплит</li>
<li>поддержка табов</li>
<li>правильно видный курсор</li>
<li>поддержка Growl</li>
</ul>
<p>и многое другое</p>
<p>люто рекомендуется к использованию.</p>
<p><a href="http://groups.google.com/group/iterm2-discuss/browse_thread/thread/3b8a29b4a51834f9?pli=1">Введение  и обсуждение в google groups</a>.</p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2011/01/freebsd-exim-logrotate/">Хозяйке FreeBSD на заметку: переворачивание логов exim</a>
    </h1>
    <div class="date">03.01.2011</div>
    <div><p>Данный совсем простой метод подходит не только для логов exim, но и любых других логов, которые необходимо переворачивать либо по размеру, либо по расписанию.</p>
<p>данные две строки</p>
<div id="_mcePaste">
  <pre escaped="true" lang="shell" line="1"><span style="font-family: 'Segoe UI', Calibri, 'Myriad Pro', Myriad, 'Trebuchet MS', Helvetica, Arial, sans-serif; line-height: 19px; white-space: normal; font-size: 13px;">
<div id="_mcePaste" style="padding: 0px; margin: 0px;">
  /var/log/exim/mainlog      mailnull:mailnull             640  7     *    @T00  JN
</div>
<div id="_mcePaste" style="padding: 0px; margin: 0px;">
  /var/log/exim/rejectlog     mailnull:mailnull             640  7     *    @T00  JN
</div>
</span></pre>
</div>
<div>
  добавленные  в файл /etc/newsyslog.conf решают проблему ежедневного переворачивания логов от почтовой системы exim
</div>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2010/12/quick-shell-cd/">Лайфхак в shell: быстрое перемещение по каталогам</a>
    </h1>
    <div class="date">12.12.2010</div>
    <div><p>UPD: добавлено видео процесса.</p>
<p>Для тех, кто способен пальцами гвозди гнуть, а именно, яростных программеров и юниксовых сисадминов будет небезынтересным эффективный способ передвижения по каталогам. Не открою большой тайны, если скажу, что наиболее популярным каталогом при работе с FreeBSD у меня является /usr/local/etc/. Это значит я наберу cd /u  tab /l tab /e tab [enter], а именно 13 нажатий клавиш .</p>
<p>А можно быстрее? <a href="http://wiki.github.com/joelthelion/autojump/">Оказывается</a> можно!</p>
<p>Небольшой скрипт, который мы можем взять с  github, и без труда проинсталлировать в системе, и вуаля.</p>
<p>Автоматически фиксируются те каталоги, куда вы чаще всего заходите и становятся доступными по шорткату «j».</p>
<p>В моем примере я всего лишь набрал «j u enter» и сразу оказался в нужном каталоге! С командой j также вполне себе работает автокомплит.</p>
<p>Исходники: <a href="http://wiki.github.com/joelthelion/autojump/">http://wiki.github.com/joelthelion/autojump/</a></p>
<p> </p>
<p>Под Mac ставится одной строкой: brew install autojump (если у вас установлен brew)</p>
<p>Enjoy.</p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2010/09/%D1%87%D1%82%D0%BE-%D1%87%D0%B0%D1%89%D0%B5-%D0%B2%D1%81%D0%B5%D0%B3%D0%BE-%D0%BB%D0%BE%D0%BC%D0%B0%D0%B5%D1%82%D1%81%D1%8F-%D1%83-%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB/">Что чаще всего ломается у пользователей?</a>
    </h1>
    <div class="date">21.09.2010</div>
    <div><p>Пытливый читатель, вероятно, догадался о том, <a href="http://it-premium.com.ua">чем занимается автор в свободное от отдыха время</a>, так вот,</p>
<p>интересную статистику на днях снял с тикетовки,</p>
<p>статистика отражает в процентном соотношении количество инцидентов по той или иной услуге и является четырехмесячным срезом.</p>
<p><a href="/uploads/2010/09/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA-%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0-2010-09-21-%D0%B2-15.42.15.png"><img class="aligncenter size-full wp-image-483" title="Снимок экрана 2010-09-21 в 15.42.15" src="/uploads/2010/09/Снимок-экрана-2010-09-21-в-15.42.15.png" alt="" width="397" height="205" srcset="/uploads/2010/09/Снимок-экрана-2010-09-21-в-15.42.15.png 397w, /uploads/2010/09/Снимок-экрана-2010-09-21-в-15.42.15-300x154.png 300w" sizes="(max-width: 397px) 100vw, 397px" /></a></p>
<p>Так что, вопреки мнению, что чаще всего у пользователей возникают проблемы с печатью не совсем верны 🙂</p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2010/03/high-availability-http-load-balancer/">high availability http load balancer</a>
    </h1>
    <div class="date">25.03.2010</div>
    <div><p>На просторах интернетов был найден software http <a href="http://haproxy.1wt.eu/">load balancer</a> для распределения нагрузки на web-front.</p>
<p>По многообещающим страницам сайта можно предположить, что модуль способен выдержать распределение http запросов с нагрузкой в десятки тысяч запросов в секунду.</p>
<p><a href="/uploads/2010/03/haproxy-pmode.png"><img class="aligncenter size-full wp-image-338" title="haproxy-pmode" src="/uploads/2010/03/haproxy-pmode.png" alt="" width="363" height="290" srcset="/uploads/2010/03/haproxy-pmode.png 363w, /uploads/2010/03/haproxy-pmode-300x239.png 300w" sizes="(max-width: 363px) 100vw, 363px" /></a></p>
<ul>
<li><a name="plat"></a><a href="http://www.kernel.org/">Linux 2.4</a> on x86, x86_64, Alpha, SPARC, MIPS, PARISC</li>
<li><a href="http://www.kernel.org/">Linux 2.6</a> on x86, x86_64, ARM (ixp425), PPC64</li>
<li><a href="http://www.sun.com/software/solaris/">Solaris 8/9</a> on UltraSPARC 2 and 3</li>
<li><a href="http://www.sun.com/software/solaris/">Solaris 10</a> on Opteron and UltraSPARC</li>
<li><a href="http://www.freebsd.org/">FreeBSD 4.10 — 6.2</a> on x86</li>
<li><a href="http://www.openbsd.org/">OpenBSD 3.1 to -current</a> on i386, amd64, macppc, alpha, sparc64 and VAX (check the ports)</li>
</ul>
<p>Впечатляющих результатов достиг Chris Knight:</p>
<h3 id="a-title200-terabytes-served-in-81-days--247tb-per-day-relbookmark-hrefhttpwwwghostwheelcommerlinpersonalnotes20070325200-terabytes-served-in-81-days-247tb-per-day200-terabytes-served-in-81-days--247tb-per-daya"><a title="200 Terabytes Served in 81 Days = 2.47TB per day!" rel="bookmark" href="http://www.ghostwheel.com/merlin/Personal/notes/2007/03/25/200-terabytes-served-in-81-days-247tb-per-day/">200 Terabytes Served in 81 Days = 2.47TB per day!</a></h3>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2010/03/active-directory-group-attributes-change/">Управление Active Directory: групповые операции над аттрибутами</a>
    </h1>
    <div class="date">11.03.2010</div>
    <div><p>Для тех, кто любит и умеет готовить AD не секрет, что работа со свойствами пользователей в больших количествах занятие трудоемкое.</p>
<p>Какие-то свойства профиля можно задать групповой операцией,  а какие-то нет.</p>
<p>Нелегкий труд ADмина призвана облегчить <a href="http://www.wisesoft.co.uk/software/bulkadusers/default.aspx">сия утилита</a>.</p>
<p><img class="alignnone" src="http://www.wisesoft.co.uk/userdata/admin/BulkADUsers_Main.png" alt="" width="678" height="446" /></p>
<p><img class="alignnone" src="http://www.wisesoft.co.uk/userdata/admin/BulkADUsers_BulkModify.png" alt="" width="475" height="593" /></p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2010/03/service-high-availiability/">Вопрос про отказоустойчивость сервисов, например, FTP</a>
    </h1>
    <div class="date">04.03.2010</div>
    <div><p>интересный вопрос мне задали сегодня</p>
<p>вот есть публичный FTP, скажем даже два FTP сервера на разных площадках хостинг-провайдера.</p>
<p>Как организовать доступность сервиса в случае падения одного из серверов?</p>
<p>DNS? А вообще бывает такой «пингующий» DNS, который будет исключать IP сервиса из резолва, если тот не «живой»?</p>
<p>Нагуглил, меж тем, вот <a href="http://www.buy.com/prod/cisco-11503-content-switch-2-x-lan-cisco-11503-content-switch-2-x-lan/q/loc/101/10323898.html">такой девайс</a></p>
<p><img class="aligncenter" src="http://ak.buy.com/db_assets/prod_lrg_images/898/10323898.jpg" alt="" width="250" height="250" /></p>
<p>за $10 000.</p>
<p>Но с поправкой на нашу суровую реальность смотрим на более бюджетные вещи 🙂</p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2010/02/open-relay-exchange-2007/">открыть/закрыть open relay Exchange 2007</a>
    </h1>
    <div class="date">02.02.2010</div>
    <div><p>было дело, <a href="http://nexus.org.ua/weblog/message/825/">открыл однажды open relay на Exchange</a> для внутренних нужд,</p>
<p>и вот на днях этот сервер стал публичным, а open relay, о ужас, остался!</p>
<p>Закрыть его было делом таким же непростым как и открыть, поэтому записываю, дабы не забыть:</p>
<p>[</p>
<p><img class="aligncenter size-full wp-image-296" title="Снимок экрана 2010-02-03 в 00.06.04" src="/uploads/2010/02/Снимок-экрана-2010-02-03-в-00.06.04.png" alt="" width="704" height="138" srcset="/uploads/2010/02/Снимок-экрана-2010-02-03-в-00.06.04.png 704w, /uploads/2010/02/Снимок-экрана-2010-02-03-в-00.06.04-300x58.png 300w" sizes="(max-width: 704px) 100vw, 704px" />]<a href="/uploads/2010/02/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA-%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0-2010-02-03-%D0%B2-00.06.04.png">2</a></p>
<p>UPDATE:</p>
<p>хозяйке на заметку: <a href="http://mxtoolbox.com">лучший сервис тестирования почтового сервера</a> на предмет корректной настройки DNS/SMTP и наличия в спамлистах.</p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2010/01/jabber-server-dns-setup/">Хозяйке на заметку: корректная настройка DNS записей для сервера jabber</a>
    </h1>
    <div class="date">20.01.2010</div>
    <div><p><img src="/uploads/2010/01/jabber_logo.jpeg" align="left" hspace="25" vspace="25" /></p>
<p>Сталкивались ли вы с проблемами отправки сообщений [Jabber с Google Hosted services](<a href="http://googletalk.blogspot.com/2006/01/xmpp-federation.html">http://googletalk.blogspot.com/2006/01/xmpp-federation.html</a>) на аккаунт вне вашего домена?</p>
<p>Если вы хотите, что бы ваш jabber сервер был доступен для общения и с другими доменами интернета (что называется «федерация»), будьте добры настроить DNS записи для вашего домена, как показано на примере ниже:</p>
<p>_xmpp-client._tcp 900 IN SRV 5 0 5222 jabber.example.com.</p>
<p>_xmpp-server._tcp 900 IN SRV 5 0 5269 jabber.example.com.</p>
<p>_jabber._tcp 900 IN SRV 5 0 5269 jabber.example.com.</p>
<p>Если вы используете службы google hosted для вашего домена, что бы корректно общаться со всеми в google talk (jabber) вам необходимо прописать следующие настройки:</p>
<p>_xmpp-server._tcp. IN SRV 5 0 5269 xmpp-server.l.google.com.</p>
<p>_xmpp-server._tcp. IN SRV 20 0 5269 xmpp-server1.l.google.com.</p>
<p>_xmpp-server._tcp. IN SRV 20 0 5269 xmpp-server2.l.google.com.</p>
<p>_xmpp-server._tcp. IN SRV 20 0 5269 xmpp-server3.l.google.com.</p>
<p>_xmpp-server._tcp. IN SRV 20 0 5269 xmpp-server4.l.google.com.</p>
<p>_jabber._tcp. IN SRV 5 0 5269 xmpp-server.l.google.com.</p>
<p>_jabber._tcp. IN SRV 20 0 5269 xmpp-server1.l.google.com.</p>
<p>_jabber._tcp. IN SRV 20 0 5269 xmpp-server2.l.google.com.</p>
<p>_jabber._tcp. IN SRV 20 0 5269 xmpp-server3.l.google.com.</p>
<p>_jabber._tcp. IN SRV 20 0 5269 xmpp-server4.l.google.com.</p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2010/01/disk-usage-analyzer-overdisk/">наглядный анализатор использования диска Overdisk</a>
    </h1>
    <div class="date">13.01.2010</div>
    <div><p><img class="alignright" title="od" src="/uploads/2010/01/od-300x224.jpg" alt="" width="300" height="224" />Была недавно замечена в работе удивительно полезная утилита  Overdisk, которая весьма наглядно, круговыми диаграммами отобразит, что именно занимает дисковое пространство на сервере.</p>
<p>А может это видеоархив в .doc? Или mp3 запрятал пользователь промеж файлов 1Ски?</p>
<p>Все это поможет выявить freeware (!) программа  <a href="http://users.forthnet.gr/pat/efotinis/programs/overdisk.html">Overdisk</a></p>
<p><a href="/uploads/2010/01/od.jpg"></a></p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2010/01/mod_security2/">mod_security2 или как обезопасить свой хостинг от злодеев?</a>
    </h1>
    <div class="date">03.01.2010</div>
    <div><p>![mod_security for apache](/uploads/2010/01/mod_security_for_apache.png)</p>
<p>В случае, если вы предоставляете услуги хостинга вам будет небесполезно знать, как быть, если сайты содержат старые версии публичных движков Joomla, ShopScript, WordPress, etc и периодически подвергаются взломам.</p>
<p>В таких случаях править код и обновлять версии клиентского ПО самостоятельно вы не будете по понятным причинам, да и не всегда у клиента есть возможность найти программера/фрилансера готового выполнить обновление работающего и приносящего доход, хотя и старого интернет-магазина или форума.</p>
<p>Может быть есть простой способ запретить обычные SQL инъекции, directory traversing и остальные распространенные методы взлома? Оказывается, такой способ есть и предоставляет его модуль apache под названием [mod_security](<a href="http://www.modsecurity.org/)">http://www.modsecurity.org/)</a>.</p>
<p>При помощи определенного набора правил, примерно как у Spamassassin, происходит тестирование вызываемого URL на предмет конструкций ../../../ и отправка в POST данных вида ‘ or 1=1</p>
<p>Для FreeBSD ставится довольно просто:</p>
<p>portinstall mod_security2</p>
<p>Для того, что бы довести функционирование этого модуля до ума прийдется потратить пару дней на изучение логов работы модуля и отключение ложных срабатываний (кои случаются) и обучению новым трюкам, что, в конечном счете, даст вам возможность спать спокойнее. На производительности сервера этот модуль отражается несущественно.</p>
<p>Отключать модуль для определенного сайта можно в секции vhosts указав</p>
<IfModule mod_security2.c>
<p>SecRuleEngine off</p>
</IfModule>
<p>Применение данного средства является хорошим «пугалом», но не есть панацея. Обновляйте ваши движки чаще, и закрывайте дыры в безопасности. И да прибудет с вами сила.</p>
<p>Пример логов:</p>
<p>[04/Jan/2010:09:15:52 +0200] [www.xxxxxxxx.com.ua/sid#28efbb60][rid#29a56058][/_vti_bin/owssvr.dll][1] Access denied with code 500 (phase 2). Pattern match «.(?:c(?:o(?:nf(?:ig)?|m)|s(?:proj|r)?|dx|er|fg|md)|p(?:rinter|ass|db|ol|wd)|v(?:b(?:proj|s)?|sdisco)|a(?:s(?:ax?|cx)|xd) |d(?:bf?|at|ll|os)|i(?:d[acq]|n[ci])|ba(?:[kt]|ckup)|res(?:ources|x)|s(?:h?tm|ql|ys)|l(?:icx|nk|og)|\w{0,5}~|webinfo|ht[rw ]|xs[dx]| …» at REQUEST_BASENAME. [file «/usr/local/etc/apache22/Includes/mod_security2/modsecurity_crs_30_http_policy.conf»] [line «94»] [id «960035»] [msg «URL file extension is restricted by policy»] [severity «CRITICAL»] [tag «POLICY/EXT_RESTRICTED»]</p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2009/12/apachetop/">apachetop</a>
    </h1>
    <div class="date">29.12.2009</div>
    <div><p>Набрел на забавную утилиту apachetop</p>
<p>Вот такой простенький, порой, бывает нужен <a href="http://www.webta.org/projects/apachetop/">анализатор состояния апача</a>, вдруг атакует кто?</p>
<p><img src="http://lh3.ggpht.com/_YlUeUCURrJM/SyEmhsX7ClI/AAAAAAAADDI/cFRlCF8j7k4/%3F%3F%3F%3F%3F%3F%20%3F%3F%3F%3F%3F%3F%202009-12-10%20%3F%2018.48.14.png?imgmax=800" border="0" alt="Снимок экрана 2009-12-10 в 18.48.14.png" width="602" height="197" /></p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2009/12/dir320-printserver/">D-Link DIR-320 и сетевая печать</a>
    </h1>
    <div class="date">28.12.2009</div>
    <div><p>Заметку побудило написать мое удивление при настройке печати через D-Link DIR-320, а именно несвойственная такого класса устройствам безгеморройность в настройке.</p>
<p>Для того что бы наш Xerox 3119 корректно распознался коробочкой пришлось обновить прошивку с 1.00 до 1.10, и после этого, о чудо, принтер был роутером обнаружен и автоматически настроен.</p>
<p><img src="/uploads/2009/12/xerox_3119_printserver.png" alt="xerox 3119 printserver" height="113" width="567" /></p>
<p>Затем, как водится, хотел добавить через network printer port с указанием IP и порта 9100, но дай-ка, думаю, посмотрю что за визард такой в админке d-link. Запускаю, появляется страница printer wizard, княпаю next,next и … загружается PrinterConfig.exe.</p>
<p>Запускаю, получаю сообщение о том, что принтер корректно установлен в система с нужным драйвером!</p>
<p><img src="/uploads/2009/12/3119_windows_driver.png" alt="3119 windows driver" height="130" width="451" /></p>
<p>Настройка под Mac также не составила никаких проблем:</p>
<p><img src="/uploads/2009/12/3119_printer_mac_setup.png" alt="3119 printer mac setup" height="514" width="600" /></p>
<p>Вот и сказочке конец, а кто DIR-320 купил, тот молодец 🙂</p></div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2009/12/freebsd-zabbix-1-8/">Ошибка при установке на FreeBSD zabbix 1.8</a>
    </h1>
    <div class="date">24.12.2009</div>
    <div><p><img class="alignnone" style="margin: 10px;" title="zabbix" src="http://www.zabbix.com/img/zabbix1.png" alt="zabbix" width="118" height="31" />Если при установке zabbix 1.8 на FreeBSD вы получаете сообщения вида:</p>
<p><img class="alignnone" style="margin: 10px;" title="freebsd logo" src="http://www.freebsd.org/logo/logo-full-thumb.png" alt="freebsd logo" width="200" height="72" /></p>
<p>60622:20091223:144406.024 Can’t allocate shared memory of size 8388608 [Cannot allocate memory]</p>
<p>60622:20091223:144406.024 Can’t allocate shared memory for configuration cache.</p>
<p>знайте, все дело в системных настройках sysctl.conf</p>
<p>в порядке тестирования пропишите</p>
<p>sysctl kern.ipc.semmni=128</p>
<p>sysctl kern.ipc.semmns=32000</p>
<p>sysctl kern.ipc.semmax=32000</p>
<p>sysctl kern.ipc.semmsl=250</p>
<p>sysctl kern.ipc.shmmni=4096</p>
<p>sysctl kern.ipc.shmmax=2147483648</p>
<p>sysctl kern.ipc.shmall=2097152</p>
<p>или сразу в /etc/sysctl.conf, тогда потребуется перезагрузка</p>
<p>kern.ipc.semmni=128</p>
<p>kern.ipc.semmns=32000</p>
<p>kern.ipc.semmax=32000</p>
<p>kern.ipc.semmsl=250</p>
<p>kern.ipc.shmmni=4096</p>
<p>kern.ipc.shmmax=2147483648</p>
<p>kern.ipc.shmall=2097152</p>
<p>проблема должна рассосаться</p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2009/12/esxi/">про VMWare ESXi</a>
    </h1>
    <div class="date">23.12.2009</div>
    <div><p>В этом посте я постарался собрать свои и чужие заметки по работе с ESXi, так как сама идея виртуализации довольно интересна.</p>
<p>Алексей Перестюк — боевой товарищ, с которым отучились в киевском физмате УФМЛКУ, правильное дело делает двигая в массы технологии виртуализации и железо от Onix.</p>
<p>Здесь его <a href="http://www.onix.kiev.ua/news.asp?id=268">вебинар по VMWare ESXi</a></p>
<div style="width: 640px; height: 256px;">
</div>
<p>Подборка моих заметок о vmware с <a href="http://nexus.org.ua">nexus.org.ua</a></p>
<p><a href="http://nexus.org.ua/weblog/message/885/">О бекапе vmware esxi</a></p>
<p><a href="http://nexus.org.ua/weblog/message/741/">Как в VMWare расширить диск</a></p>
<p><a href="http://nexus.org.ua/weblog/message/679/">Виртуализация средствами VMWare</a></p>
<p><a href="http://nexus.org.ua/weblog/message/724/">Способ миграции сервера из виртуалки на физику и обратно</a></p>
<p><a href="http://nexus.org.ua/weblog/message/661/">(updated) VMWare сервер, контроллер домена и проблемы с синхронизацией по времени</a></p>
<p><a href="http://nexus.org.ua/weblog/message/653/">Если VMWare образы систем очень ТОРМОЗЯТ</a></p>
<p><a href="http://nexus.org.ua/weblog/message/651/">Ставил в production VMWare сервер</a></p>
<p><a href="http://nexus.org.ua/weblog/message/883/">Установка ESX на Proliant ML110 G5</a></p>
<p>и на закуску практический опыт, мой подкаст совместно с <a href="http://brj.pp.ru">brj</a>:</p>
<ul>
<li>Виртуализация средствами VMWare ESX 3.5i, опыт эксплуатации.</li>
<li>снижение Total Cost of Ownership</li>
<li>оборудование для виртуализации</li>
<li>Windows Home Server</li>
<li>Novell OES</li>
</ul>
<p><a href="http://rpod.ru/personal/storage/00/00/00/81/32/podcast_5_1.mp3?xfd5fb33ad2f9963b5bd0c2afadf68914117fbdb3f86e9426a4601729ea577ea32">Практическое погружение в VMWare ESX</a></p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://mprokopov.github.io/2009/12/right-clean-exchange/">Самый правильный скрипт очистки обменника</a>
    </h1>
    <div class="date">22.12.2009</div>
    <div><p><a href="http://blog.nexus.org.ua/wp-content/uploads/2009/12/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA-%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0-2009-12-22-%D0%B2-16.12.42.png"><img class="alignleft size-full wp-image-37" style="margin-top: 8px; margin-bottom: 8px; margin-left: 10px; margin-right: 10px;" title="Снимок-экрана-2009-12-22-в-16.12.42.png" src="http://blog.nexus.org.ua/wp-content/uploads/2009/12/Снимок-экрана-2009-12-22-в-16.12.42.png" alt="" width="52" height="60" /></a></p>
<p>Не секрет, что практически у каждой организации есть специальная расшаренная папка для обмена, чаще называемая «файлопомойкой».</p>
<p>Есть ли хороший способ уборки мусора? Что бы кто-то приезжал на мусоровозе и увозил каждый вечер кучи ненужных файлов подальше от хранилища?</p>
<p>Оказывается есть!</p>
<p>Раньше я пользовался простым, как канализационный люк, способом «убить все по расписанию в 00:00» и после пары-тройки случаев потерянных каталогов и файлов пользователи приучивались к долгосрочному хранению в обменнике с осторожностью.</p>
<p>На просторах хабра был выужен гораздо более гуманный и удачный способ очистки Exchange, принципы работы которого я опишу ниже:</p>
<ol>
<li>
<p>запускаясь каждый вечер скрипт перекладывает файлы и папки с датой модификации -7 дней (неделю назад) в каталог _deletion_queue_.</p>
</li>
<li>
<p>скрипт удаляет из _deletion_queue_ каталоги и файлы старше 10 дней.</p>
</li>
<li>
<p>можно создать каталог с именем dont_delete, который не будет очищаться совсем.</p>
</li>
</ol>
<p>Итак, виновник поста: <a href="/clear_exchange_v2s.vbs">clear_exchange_v2s.vbs</a></p>
<p>Спасибо автору, Константину Тимохину (<a href="mailto:k.timokhin@gmail.com">k.timokhin@gmail.com</a>)</p>
</div>
</div>


        </div>
        <div class="clear"></div><div id="sidebar"><div id="sidebar-widget">
    <div class="sidebar-heading">Визитка</div><p></p>
    <div class="textwidget">
        
        <a href="https://ru-ru.facebook.com/mprokopov" target="_TOP" style="font-family: &quot;lucida grande&quot;,tahoma,verdana,arial,sans-serif; font-size: 11px; font-variant: normal; font-style: normal; font-weight: normal; color: #3B5998; text-decoration: none;" title="Max Prokopov" rel="noopener noreferrer">Max Prokopov</a><br><a href="https://ru-ru.facebook.com/mprokopov" target="_TOP" title="Max Prokopov" rel="noopener noreferrer"><img src="https://badge.facebook.com/badge/564099895.8308.711585450.png" style="border: 0px;"></a>
        </div>
</div>

<div id="sidebar-widget">
    <div class="sidebar-heading">Категории</div>
    <p></p>
    <ul>
        
        <li><a href="/categories/apache/">apache</a> (3) </li>
        
        <li><a href="/categories/clojure/">clojure</a> (1) </li>
        
        <li><a href="/categories/education/">education</a> (2) </li>
        
        <li><a href="/categories/freebsd/">FreeBSD</a> (8) </li>
        
        <li><a href="/categories/gtd/">GTD</a> (4) </li>
        
        <li><a href="/categories/iphone/">iPhone</a> (4) </li>
        
        <li><a href="/categories/kubernetes/">kubernetes</a> (1) </li>
        
        <li><a href="/categories/lifehack/">lifehack</a> (24) </li>
        
        <li><a href="/categories/links/">links</a> (4) </li>
        
        <li><a href="/categories/linux/">linux</a> (1) </li>
        
        <li><a href="/categories/macos/">macos</a> (1) </li>
        
        <li><a href="/categories/rails/">rails</a> (1) </li>
        
        <li><a href="/categories/sip/">sip</a> (1) </li>
        
        <li><a href="/categories/tips-and-tricks/">tips and tricks</a> (1) </li>
        
        <li><a href="/categories/vmware/">vmware</a> (2) </li>
        
        <li><a href="/categories/windows/">windows</a> (4) </li>
        
        <li><a href="/categories/%D0%B0%D0%B4%D0%BC%D0%B8%D0%BD%D0%B8%D1%81%D1%82%D1%80%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5/">администрирование</a> (32) </li>
        
        <li><a href="/categories/%D0%B1%D0%B5%D0%B7-%D0%BA%D0%B0%D1%82%D0%B5%D0%B3%D0%BE%D1%80%D0%B8%D0%B8/">без категории</a> (1) </li>
        
        <li><a href="/categories/%D0%B1%D1%8B%D1%82%D0%BE%D0%B2%D0%B0%D1%8F-%D1%82%D0%B5%D1%85%D0%BD%D0%B8%D0%BA%D0%B0/">бытовая техника</a> (3) </li>
        
        <li><a href="/categories/%D0%B2%D0%B5%D0%B1-%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0/">веб-разработка</a> (8) </li>
        
        <li><a href="/categories/%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F/">виртуализация</a> (1) </li>
        
        <li><a href="/categories/%D0%B3%D0%B0%D0%B4%D0%B6%D0%B5%D1%82%D1%8B/">гаджеты</a> (2) </li>
        
        <li><a href="/categories/%D0%B6%D0%B5%D0%BB%D0%B5%D0%B7%D0%BE/">железо</a> (3) </li>
        
        <li><a href="/categories/%D0%B7%D0%B0-%D0%B6%D0%B8%D0%B7%D0%BD%D1%8C/">за жизнь</a> (117) </li>
        
        <li><a href="/categories/%D0%B7%D0%B4%D0%BE%D1%80%D0%BE%D0%B2%D1%8C%D0%B5/">здоровье</a> (4) </li>
        
        <li><a href="/categories/%D0%BC%D0%B0%D0%BA/">Мак</a> (44) </li>
        
        <li><a href="/categories/%D0%BC%D0%B0%D1%80%D0%BA%D0%B5%D1%82%D0%B8%D0%BD%D0%B3/">маркетинг</a> (2) </li>
        
        <li><a href="/categories/%D1%81%D0%BE%D1%84%D1%82/">Софт</a> (25) </li>
        
        <li><a href="/categories/%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5/">управление</a> (1) </li>
        
        <li><a href="/categories/%D1%8E%D0%BC%D0%BE%D1%80/">Юмор</a> (6) </li>
        
    </ul>
</div>
<div id="linkcat-2"><div class="sidebar-heading">Друзья и коллеги</div><p></p>
	<ul class="xoxo blogroll">
      
      <li><a href="https://it-premium.com.ua" title="Наш сайт по ИТ-аутсорсингу" >IT-Premium аутсорсинг от профессионалов</a></li>

      
      <li><a href="http://nexusonrails.blogspot.com/" title="Мой блог на blogger.com о Ruby on Rails" >Nexus on Rails</a></li>

      
      <li><a href="http://blog.it-premium.com.ua" title="Блог Максима Прокопова про Docker, Xen и CoreOS и всякое такое" rel="friend">Maksym Prokopov about Docker, Xen и CoreOS</a></li>

      
      <li><a href="http://nexus.org.ua" title="Сайт об IT технологиях" >Мой хардкорный убер сайт 2005 года Nexus Notes</a></li>

      
      <li><a href="http://condom.org.ua" title="Контрацепция в деталях" >Проект о контрацепции</a></li>

      
      <li><a href="https://super-truper.com.ua" title="Лучший интернет-магазин ручного инструмента Truper" >Интернет-магазин ручного инструмента Truper</a></li>

      
      <li><a href="http://asterisk.in.ua" title="Курсы и услуги по внедрению asterisk" >Asterisk.in.ua</a></li>

      
      <li><a href="http://it-premium.livejournal.com/" title="" rel="friend co-worker neighbor">IT-Premium company blog</a></li>

      
	</ul>
</div>
</div>


</body>
</html>
