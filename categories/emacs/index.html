<!DOCTYPE html>
<html>
    <head><title>Emacs - Maksym Prokopov personal blog</title>
<meta charset="utf-8"/>
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta content="width=device-width, initial-scale=1.0, user-scalable=no" name="viewport">
<meta name="viewport" content="width=device-width, initial-scale=1">



<script>
 var remark_config = {
   host: 'https://remark.prokopov.me',
   site_id: 'remark',
   no_footer: true
 }
</script>
<script>!function(e,n){for(var o=0;o<e.length;o++){var r=n.createElement("script"),c=".js",d=n.head||n.body;"noModule"in r?(r.type="module",c=".mjs"):r.async=!0,r.defer=!0,r.src=remark_config.host+"/web/"+e[o]+c,d.appendChild(r)}}(remark_config.components||["embed"],document);</script>


<link rel="stylesheet" href="https://prokopov.me/style.min.24166a1e761f51442033103dc963330d3526a4339a58ab46d3fee0c94a62f4a3.css">
<script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
<script type='text' src='https://platform.linkedin.com/badges/js/profile.js' async defer ></script>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                                                      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                                                                                                j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                                                                                                    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
 })(window,document,'script','dataLayer','GTM-WB9KBZ5');</script>

<script defer data-domain="prokopov.me" src="https://analytics.prokopov.me/js/script.js"></script>
</head>
    <body><div class="header">
    <a class="title" href="/"><div id="title">Maksym Prokopov personal blog</div><div id="description">Idea is a something worth sharing</div></a>
</div>
<div class="nav">
    
    <div class="page-item"><a href="https://prokopov.me/pages/projects/">Projects</a></div>
    
    <div class="page-item"><a href="https://prokopov.me/pages/talks/">Talks</a></div>
    
    <div class="page-item"><a href="https://prokopov.me/pages/about/">About</a></div>
    
</div>


<div class="article">
    <h1>
        <a href="https://prokopov.me/posts/emacs-for-beginners/">Emacs For Beginners</a>
    </h1>
    <div class="date">10.05.2024</div>
    <div><p>The article provides overview of facts why Emacs is so different but also so
powerful comparing to other editors. It gives a good starting point for the
reader to understand the fundamentals and start own journey to effective work.</p>
<p>The way of learning is painful, but rewarding. The essense of Emacs is to codify your specific repetitive tasks so that eventually you realize, the editor contains a lot of customizations speeding up your daily routines, as no other editor does.</p>
<p>I do the following things in Emacs:</p>
<ul>
<li>Coding in following languages: Ruby (Ruby on Rails), Python, Clojure, Javascript, TypeScript</li>
<li>Writing Terraform and Nomad configuration with HCL</li>
<li>Blogging in Hugo and deploying to production</li>
<li>Using Kubernetes via TUI</li>
<li>Writing diary</li>
<li>Book keeping</li>
<li>Planning my life/projects/tasks</li>
</ul>
<p>First of all, Emacs is a runtime environment with <em>a set of named functions</em> you can call any time. Use <kbd>Meta-x</kbd> key combination to spawn a list of “interactive” functions. There are more functions, but only those who marked as <em>interactive</em> supposed to be in this list.</p>
<p>Functions are written in a dialect of Lisp, so called emacs-lisp. If you want one sentence definition of lisp, here it is. First argument in a brackets is a <strong>function name</strong>, the <em>rest is its arguments</em>. Example</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>(<span style="color:#a6e22e">+</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span>)
</span></span></code></pre></div><p>In this example + is a function name, 1 and 2 are the arguments. The output is 3. Yeah, this is it. Emacs can execute a freshly written function on the fly.</p>
<p>Every time you hit a keystroke in Emacs you call a function. Even for a cursor movement. There is an easy way to find what function is bound to a keystroke by using <kbd>C-h k</kbd> followed by the keystroke. Remarkable feature is a documentation for any function is only <kbd>C-h f</kbd> away. This makes Emacs exploration a breeze.</p>
<p>An opened file is called a <em>buffer</em>. Depending on the file type, Emacs loads automatically a set of functions and key bindings to those functions. This is called a <em>mode</em>. Also how the content of the buffer is highlighted is defined in the “mode”. A set of functions, syntax highlighting and keybindings is called a <em>major</em> mode.</p>
<p>Whenever you switch between buffers, Emacs also switches the major mode depending on the selected buffer.</p>
<p>There are different <em>modes</em> for different purposes. Sometimes you want to share the same functionality across different types of buffers, so what you typically have in opened buffer is a mixture of different “modes”.
A set of shared functions with keybindings is called a <em>minor</em> mode.</p>
<p>A <em>package</em> is a way to distribute such modes. Other editors call this a “plug-in”. There are repositories for the packages, such as MELPA. In case you want to install a new package, hit <kbd>Meta-X</kbd> and call the function <code>list-packages-list</code>.</p>
<p>Despite you can install packages and change settings manually, among the best practices is to keep Emacs <em>configuration as a code</em>. This is why you might find many “dotemacs“ repositories with configuration of other users in internet. It’s always a great source of insights of how other people use Emacs.</p>
<p>Typically users start their journey with <em>popular packages</em> and a standard or community-driven configuration, but with the time they recognize own repetitive tasks and create their own functions and assign them own keybindings. In this way they end up having an editor naturally fitting their workflows, saving significant amount of time every day.</p>
<p>Though, the learning curve is quite steep and there are good reasons for this. Emacs lisp is not so popular as Javascript or Python. The naming is always hard and is a something that is not easy to change over time. Other editors don’t use the same terminology as <em>packages, buffers, modes, frames and windows</em>. The syntax highlighting using <em>regexps</em> is a quite outdated technology nowadays. Even regexp library has a very special syntax from what users got used to. Another big issue is a combination of packages can be fragile, it’s a very common case when a package after update can <em>break functionality</em> of other packages.</p>
<p>Even key modifiers are named differently from other editors: <em>Meta, Hyper, Super</em>.
My personal take on default keybindings - they’re aweful and RSI  prone. Once you realize the <em>Control</em> key supposed to be a key closest to the spacebar, as it was designed for Space Cadet keyboards (it had also Meta, Hyper and Super keys), it became obvious how to make Emacs usage <em>much more wrist friendly</em>. Just do the same on your keyboard, map the control key to whatever key you have closest to the spacebar, in my case it’s <em>cmd</em> on mac keyboard.</p>
<h2 id="summary">Summary</h2>
<p>In essence Emacs is an editing environment with set of functions, variables, syntax highlighting and keybindings.</p>
<p>Bare Emacs is not so feature reach, but packages ecosystem provides a good foundation for any type of everyday tasks and some of those are unmatched in another editors.</p>
<p>The real power comes after user learns enough fundamentals to start customizing Emacs to perform repetitive tasks faster.</p>
<p>Though, the learning curve can be steep for different reasons and it’s strongly advised to change default keybindings to improve ergonomic.</p></div>
</div>

<div class="article">
    <h1>
        <a href="https://prokopov.me/posts/emacs-ergonomics-apple/">Emacs, apple keyboard, and RSI</a>
    </h1>
    <div class="date">07.06.2022</div>
    <div><p>Recently I&rsquo;ve started investigation on the most effective shortcuts for Emacs.
Already for a long time I&rsquo;ve been using Caps Lock remapped to Esc when pressed alone, and Ctrl-Key when pressed with any other key.</p>
<p>I didn&rsquo;t use Emacs with native bindings for a long time, because of wrist related issues, which immediately appeared after using pinky for pressing long chords which normally included Ctrl-C combination. This is why I used Spacemacs and later Doom Emacs as the configuration of choice.</p>
<p>And this worked relatively good, I used the same bindings for Vim in terminal, and no RSI since pinky wasn&rsquo;t overloaded with long presses. But something were not so good, I needed to keep a context in the head and using special modes like eshell or repl weren&rsquo;t fun because of context switch losses.</p>
<p>So I&rsquo;ve started reading the book Mastering Emacs, which I definitely recommend, I decided to give a try to alternative solutions for Emacs keybindings.</p>
<p>First of which were using interesting combinations for the keychords like pressing J+K equals to Control and pressing F+D equals to control. The idea was to reduce pressure on pinky by moving control to the &ldquo;home&rdquo; row. This worked to some extent. Long combinations with Ctrl, like &ldquo;C-c C-o C-r&rdquo; needed to have very uncomfortable key sequences. Apart from this constant typos where annoying, when you switched keys too fast. So I dropped this option and started looking for new ways.</p>
<p>I realised, that Ctrl should not be pressed by pinky, it should be just convenient enough to reach.
Then I saw old design of the Space Kadet keyboard, and it had Control right near the Space key.</p>
<p><img src="space-cadet.jpg" alt="Space Cadet keyboard"></p>
<p>Whan I swapped Command and Control keys, man, that was real enlightenment, literally everything started being comfortable. Look, Ctrl-x-s is just a single row. Ctrl-c feels natural, because you literally use mighty thumb and index fingers. Movement with Ctrl-a, Ctrl-e, Ctrl-n and Ctrl-p just started having much more sence and convenience. Most of the Emacs combinations with Ctrl-C and Ctrl-X are sane now.</p>
<p>It comes as a bonus using readline compatible utilities in terminal.</p>
<p>I really think swapping Caps Lock and Control is a BAD advice that did enourmous harm for neglecting Emacs than anything else. Either Windows based keyboards having Alt, or Mac based keyboards having Command, should be swapped with Control at least in Emacs and other readline applications. Do this right now using Karabiner Elements free application for MacOS and never experience any RSI.</p>
<p>Using Karabiner Elements you can make this change only for the several applications, like Emacs and iTerm, and not the system-wide.</p>
<p>Update:</p>
<p>In order to remap command to control you don&rsquo;t event need Karabiner Element, just map command to control using the following snippet</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="display:flex;"><span>(setq ns-modifier-command <span style="color:#e6db74">&#39;control</span>)
</span></span></code></pre></div><p>In iTerm it&rsquo;s also easy to do, open</p>
<p>Preferences -&gt; Keys -&gt; Remap modifiers</p>
<p>and change the settings. One more trick is how to switch between apps from iTerm using Cmd+Tab when it&rsquo;s remapped?</p>
<p>Here is how to do this <a href="https://gitlab.com/gnachman/iterm2/-/issues/6394">https://gitlab.com/gnachman/iterm2/-/issues/6394</a></p>
<blockquote>
<p>You can add exceptions to keyboard remapping, but it&rsquo;s not very intuitive. Add a key mapping to Prefs &gt; Keys. First, select the action Do Not Remap Modifiers. Then set the shortcut to Cmd-Tab (by pressing the physical cmd key plus tab).</p>
</blockquote>
<p>RSI stands for repetitive stain injury
<a href="https://www.nhs.uk/conditions/repetitive-strain-injury-rsi/">https://www.nhs.uk/conditions/repetitive-strain-injury-rsi/</a></p>
</div>
</div>

<div class="article">
    <h1>
        <a href="https://prokopov.me/posts/2021-02-02-org-protocol-chrome-no-confirmation/">Disable Chrome browser confirmation to open external protocol with org-protocol</a>
    </h1>
    <div class="date">02.02.2021</div>
    <div><p>I recently added org-capture chrome extension to my toolbelt. Unfortunalely chrome annoys me by asking if I want to open this protocol link every time.</p>
<p>Here is the simple way to fix this.</p>
<p>Execute this in the shell</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>defaults write com.google.Chrome URLAllowlist -array-add -string <span style="color:#e6db74">&#39;org-protocol://*&#39;</span>
</span></span></code></pre></div><p>check
<a href="chrome://policy">chrome://policy</a> url that it contains proper settings for org-protocol</p>
<p><img src="/uploads/chrome-policy.png" alt="Chrome policy"></p></div>
</div>




<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WB9KBZ5"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

</body>
</html>
